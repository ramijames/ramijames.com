<template>
  <section id="how-it-works" ref="howItWorks">
    <section class="general-main">
      <section class="how-it-intro">
        <div class="box-super-title">
          <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 26C20.6274 26 26 20.6274 26 14C26 7.37258 20.6274 2 14 2C7.37258 2 2 7.37258 2 14C2 20.6274 7.37258 26 14 26Z" stroke="#A131E7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12.1849 17.4329V17.1903C12.1898 16.3578 12.2665 15.6941 12.415 15.1993C12.5684 14.7046 12.7911 14.3049 13.0831 14.0005C13.3752 13.696 13.7266 13.4201 14.1373 13.1727C14.4442 12.9824 14.7189 12.785 14.9614 12.5804C15.2039 12.3758 15.3969 12.1499 15.5405 11.9025C15.684 11.6503 15.7558 11.3696 15.7558 11.0604C15.7558 10.7322 15.6741 10.4443 15.5108 10.197C15.3474 9.94957 15.1272 9.75928 14.85 9.62607C14.5778 9.49286 14.2759 9.42626 13.9443 9.42626C13.6226 9.42626 13.3182 9.49524 13.0312 9.63321C12.7441 9.76641 12.509 9.96622 12.3259 10.2326C12.1428 10.4943 12.0438 10.8202 12.029 11.2103H9C9.02475 10.2588 9.26231 9.47383 9.71269 8.85538C10.1631 8.23216 10.7595 7.76832 11.5019 7.46384C12.2442 7.15462 13.0634 7 13.9592 7C14.9441 7 15.8151 7.15699 16.5724 7.47098C17.3296 7.78021 17.9235 8.22978 18.3541 8.8197C18.7847 9.40961 19 10.1208 19 10.9534C19 11.51 18.9035 12.0048 18.7105 12.4377C18.5224 12.8658 18.2576 13.2464 17.9161 13.5794C17.5746 13.9077 17.1712 14.205 16.706 14.4715C16.315 14.6951 15.9933 14.9282 15.7409 15.1708C15.4934 15.4134 15.3078 15.6941 15.1841 16.0128C15.0653 16.3316 15.0035 16.7241 14.9985 17.1903V17.4329H12.1849ZM13.6548 22C13.1599 22 12.7367 21.8335 12.3853 21.5005C12.0389 21.1627 11.8681 20.7583 11.8731 20.2873C11.8681 19.8211 12.0389 19.4215 12.3853 19.0885C12.7367 18.7555 13.1599 18.589 13.6548 18.589C14.125 18.589 14.5382 18.7555 14.8946 19.0885C15.2509 19.4215 15.4316 19.8211 15.4365 20.2873C15.4316 20.6013 15.345 20.8892 15.1767 21.1508C15.0134 21.4077 14.7981 21.6147 14.5308 21.7716C14.2635 21.9239 13.9715 22 13.6548 22Z" fill="#A131E7"/>
          </svg>
          <span>How it works</span>
        </div>
        <div class="box-main-sell">
          <h2>Let's ensure your success</h2>
        </div>
        <div class="box-convince-me">
          <p>I know that you want is to have a clear idea of what you are spending and getting in return, so the process is set up to prioritize your visibility and set predetermined costs.</p>
        </div>

        <section class="process-outline">
          <div class="step">
            <section class="step-image">
              <img src="/hero-discuss.png" alt="Discuss your project">
            </section>
            <section>
              <h4 class="step-title discuss-title">Discuss</h4>
              <p class="step-description">Every project starts with a discussion that helps me understand what your needs are and what you are building.</p>
            </section>
          </div>

          <div class="step">
            <section class="step-image">
              <img src="/hero-subscribe.png" alt="Subscribe">
            </section>
            <section>
              <h4 class="step-title subscribe-title">Subscribe</h4>
              <p class="step-description">Once we have established the scale of work, we can set up a monthly retainer that fits what you are trying to achieve. I am a drop-in replacement for multiple hard-to-fill roles in your organization.</p>
            </section>
          </div>

          <div class="step">
            <section class="step-image">
              <img src="/hero-build.png" alt="Build">
            </section>
            <section>
              <h4 class="step-title build-title">Build</h4>
              <p class="step-description">Together we will iterate through a design process that will help you define your product ensure that it fits your business' needs and the market's desire.</p>
            </section>
          </div>
        </section>
      </section>
      <section class="how-it-illustration">
        <section class="layer-bubbles">
          <div class="bubble manager">
            <div class="title">Manager</div>
            <div class="says">This looks great, but can we make it pop more?</div>
            <div class="arrow">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.7846 7.5H17.6237C14.5178 7.5 12 4.98217 12 1.87628C12 0.616827 10.3138 0.198029 9.72452 1.31112L0.941165 17.9019C0.711746 18.3353 1.1783 18.8056 1.61347 18.5796L18.366 9.88118C19.5382 9.27253 19.1054 7.5 17.7846 7.5Z" fill="black" stroke="white"/>
              </svg>
            </div>
          </div>
          <div class="bubble dev">
            <div class="title">Developer</div>
            <div class="says">How responsive will this be?</div>
            <div class="arrow">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.7846 7.5H17.6237C14.5178 7.5 12 4.98217 12 1.87628C12 0.616827 10.3138 0.198029 9.72452 1.31112L0.941165 17.9019C0.711746 18.3353 1.1783 18.8056 1.61347 18.5796L18.366 9.88118C19.5382 9.27253 19.1054 7.5 17.7846 7.5Z" fill="black" stroke="white"/>
              </svg>
            </div>
          </div>
          <div class="bubble pm">
            <div class="title">Project Manager</div>
            <div class="says">I love how much text fits in here now.</div>
            <div class="arrow">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.7846 7.5H17.6237C14.5178 7.5 12 4.98217 12 1.87628C12 0.616827 10.3138 0.198029 9.72452 1.31112L0.941165 17.9019C0.711746 18.3353 1.1783 18.8056 1.61347 18.5796L18.366 9.88118C19.5382 9.27253 19.1054 7.5 17.7846 7.5Z" fill="black" stroke="white"/>
              </svg>
            </div>
          </div>
        </section>
        <section class="layer-ui">
          <div class="fake-image"></div>
          <div class="fake-bar">
            <div class="fake-icons">
              <svg width="61" height="21" viewBox="0 0 61 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M49.6756 1.84517L49.9929 2.10171L50.3078 1.84232C50.625 1.58111 50.9662 1.35741 51.3301 1.17158C52.3108 0.67071 53.1606 0.500088 54.5521 0.500017C57.9148 0.515175 60.5 3.48059 60.5 7.42902C60.5 10.4069 58.9107 13.3462 55.809 16.257C54.1792 17.7865 52.0993 19.2974 50.6287 20.092L50.2377 20.3033C50.0894 20.3834 49.9106 20.3834 49.7623 20.3033L49.3713 20.092C47.9007 19.2974 45.8208 17.7865 44.191 16.257C41.0893 13.3462 39.5 10.4069 39.5 7.42902C39.5 3.43462 42.0606 0.5 45.4545 0.5C46.7896 0.5 47.6881 0.685724 48.6925 1.20407C49.0422 1.38456 49.3704 1.59842 49.6756 1.84517Z" stroke="#6C1B9F"/>
                <path d="M17.6841 17.646L20.6887 20.036C21.0163 20.2966 21.5 20.0633 21.5 19.6447V1.11374C21.5 0.948977 21.4353 0.792194 21.3221 0.677559C21.2091 0.563134 21.0571 0.5 20.9 0.5H1.1C0.942886 0.5 0.790936 0.563135 0.677923 0.677559C0.564703 0.792194 0.5 0.948977 0.5 1.11374V16.7061C0.5 16.8709 0.564703 17.0277 0.677923 17.1423C0.790936 17.2567 0.942886 17.3199 1.1 17.3199H16.7503C17.0895 17.3199 17.4186 17.4348 17.6841 17.646Z" stroke="#6C1B9F"/>
              </svg>
            </div>
          </div>
          <div class="fake-description">
            <div class="header"></div>
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
          </div>
        </section>
      </section>
    </section>
  </section>
</template>

<script>

// export default {
//   data() {
//     return {
//       previousBodyClass: ''
//     };
//   },
//   mounted() {
//     const observer = new IntersectionObserver(
//       ([entry]) => {
//         if (entry.isIntersecting) {
//           this.previousBodyClass = document.body.className;
//           document.body.classList.add('dark');
//         } else {
//           document.body.className = this.previousBodyClass;
//         }
//       },
//       {
//         root: null,
//         rootMargin: '0px',
//         threshold: 0.8
//       }
//     );

//     observer.observe(this.$refs.howItWorks);
//   }
// }

</script>

<style scoped lang="scss">

#how-it-works {
  width: 100%;
  padding:4rem 8rem;
  display: flex;
  flex-direction: column;
  margin:0;
  background-color: white;
  position:relative;
  overflow: hidden;

  @media screen and (max-width: 1200px) {
    flex-direction: column;
    padding:4rem;
  }
  
  @media screen and (max-width: 768px) {
    flex-direction: column;
    padding:0rem;
  }
}

    .dark #how-it-works {
      background-image: linear-gradient(125deg, rgb(44, 13, 63) 10%, rgb(44, 13, 63) 25%);
    }

.box-super-title {
  display:flex;
  flex-direction: row;
  align-items: center;
  gap:1rem;

  svg {
    width:24px;
    height:24px;
  }

  span {
    text-transform: uppercase;
    letter-spacing: 0.1rem;
    font-weight: bold;
  }

}

.box-main-sell {
  h2 {
    margin: 1rem 2rem 1rem 0;
  }
}

.box-convince-me {
  p {
    margin: 1rem 2rem 1rem 0;
    font-size:0.8rem;
  }
}

.how-it-intro {
  width:65%;

  @media screen and (max-width: 1400px) {
    width:50%;
  }

  @media screen and (max-width: 1000px) {
    width:100%;
  }
}

.process-outline {
  display:flex;
  flex-direction: column;
  gap:4rem;
  margin-top:4rem;

  .step {
    display:flex;
    flex-direction: row;
    gap:2rem;

    img,
    svg {
      width:100px;
      height:100px;
      border-radius: 0.3rem;
    }

    .step-title {
      margin: 0 0 0.25rem;
      font-weight: bold;
    }

        .discuss-title {
          color:#8C00EC;
        }

        .subscribe-title {
          color:#E700EC;
        }

        .build-title {
          color:#40CD0E;
        }

    .step-description {
      margin:0;
      font-size:0.8rem;
    }
  }
}

.how-it-illustration {
  width:35%;
  display:flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  margin:0 4rem;
  padding:0 2rem;
  position:relative;
  perspective: 100em;

  &::after {
    position:absolute;
    width:100%;
    height:60%;
    background-color: #8C00EC;
    filter:blur(120px);
    content:'';
    bottom:0;
    right:-20%;
    opacity: 0.05;
  }

  .layer-bubbles {
    width:100%;
    height:100%;
    position: relative;
    transform: translate3d(0, 0, 100px) rotate3d(3, -3, 0, 30deg);
    z-index: 2;

    .bubble {
      width:50%;
      padding:1rem;
      border-radius: 0.3rem;
      backdrop-filter: blur(4px);
      position:absolute;
      animation: circle 22s ease-in-out;
      animation-fill-mode: forwards;
      animation-iteration-count: infinite;
      box-shadow: 10px 10px 0px rgba(0,0,0,0.05);

      .arrow {
        position:absolute;
      }

      &.manager {
        background: linear-gradient(35deg, #41cd0e17 50%, #41cd0e97);
        border:1px solid #40CD0E;
        top:4rem;
        animation-delay:1s;
        box-shadow: 10px 10px 0px rgba(0,0,0,0.05), inset 0 0 6px #41cd0e97, 2px 2px 0px #40CD0E;

        .arrow {
          right:-1.5rem;
          top:-1.5rem;
          transform: rotate(180deg);
        }
      }

      &.pm {
        background: linear-gradient(35deg, #c87bff18 50%, #c87bff9d);
        border:1px solid #C97BFF;
        top:16rem;
        right:0;
        animation-delay:4s;
        box-shadow: 10px 10px 0px rgba(0,0,0,0.05), inset 0 0 6px #c87bff9d, 2px 2px 0px #C97BFF;

        .arrow {
          left:-1.5rem;
          bottom:-1.5rem;
        }
      }

      &.dev {
        background: linear-gradient(35deg, #e800ec1d 50%, #e800ec9a);
        border:1px solid #E700EC;
        top:28rem;
        animation-delay:8s;
        box-shadow: 10px 10px 0px rgba(0,0,0,0.05), inset 0 0 6px #e800ec9a, 2px 2px 0px #E700EC;

        .arrow {
          right:-1.5rem;
          top:-1.5rem;
          transform: rotate(-180deg);
        }
      }

      .title {
        font-size:0.6rem;
        text-transform: uppercase;
        letter-spacing: 0.1rem;
        opacity: 0.6;
        margin-bottom:0.5rem;
      }
    }
  }

  .layer-ui {
    width:100%;
    height:100%;
    position: relative;
    transform: translate3d(0, 0, -100px) rotate3d(3, -3, 0, 30deg);
    z-index: 1;
    perspective: 100em;
  }

  .fake-image {
    width:100%;
    height:300px;
    background: linear-gradient(white, white) padding-box,
                linear-gradient(to bottom, rgb(177, 87, 233), rgb(108, 27, 159)) border-box;
    border: 1px solid transparent;
    border-radius: 0.6rem;
    animation: pulse 2s ease-in-out;
    animation-fill-mode: forwards;
    animation-iteration-count: infinite;
    animation-delay:0.4s;
    box-shadow: 10px 10px 0px rgba(0,0,0,0.05), inset 0 0 6px rgba(108, 27, 159, 0.2), 2px 2px 0px rgba(108, 27, 159, 0.206);
  }

  .fake-bar {
    padding:1rem;
    display:flex;
    flex-direction: row;
    justify-content: space-between;
    width:100%;
    animation: pulse 2s ease-in-out;
    animation-fill-mode: forwards;
    animation-iteration-count: infinite;
    animation-delay:0.8s;
  }

  .fake-description {
    width:100%;
    display:flex;
    flex-direction: column;
    gap:0.5rem;
    margin:2rem 0 0 0;
    perspective: 100em;

    .header {
      height:20px;
      background: linear-gradient(white, white) padding-box,
                  linear-gradient(to bottom, rgb(108, 27, 159), rgb(108, 27, 159)) border-box;
      border: 1px solid transparent;
      border-radius: 0.6rem;
      width:50%;
      margin-bottom:1rem;
      animation: pulse 2s ease-in-out;
      animation-fill-mode: forwards;
      animation-iteration-count: infinite;
      animation-delay:1.2s;
      box-shadow: 10px 10px 0px rgba(0,0,0,0.05), inset 0 0 6px rgba(108, 27, 159, 0.2), 2px 2px 0px rgba(108, 27, 159, 0.206);
    }

    .line {
      height:10px;
      background: linear-gradient(white, white) padding-box,
                  linear-gradient(to bottom, rgb(108, 27, 159), rgb(108, 27, 159)) border-box;
      border: 1px solid transparent;
      border-radius: 0.6rem;
      animation: pulse 2s ease-in-out;
      animation-fill-mode: forwards;
      animation-iteration-count: infinite;
      box-shadow: 10px 10px 0px rgba(0,0,0,0.05), inset 0 0 6px rgba(108, 27, 159, 0.2), 2px 2px 0px rgba(108, 27, 159, 0.206);

      &:nth-child(1) {
        width:70%;
        animation-delay:1.4s;
      }

      &:nth-child(2) {
        width:70%;
        animation-delay:1.8s;
      }

      &:nth-child(3) {
        width:70%;
        animation-delay:2.2s;
      }

      &:nth-child(4) {
        width:70%;
        animation-delay:2.6s;
      }

      &:nth-child(5) {
        width:80%;
        animation-delay:3.2s;
      }

      &:nth-child(6) {
        width:70%;
        animation-delay:3.6s;
      }

      &:nth-child(7) {
        width:70%;
        animation-delay:4s;
      }

      &:nth-child(8) {
        width:70%;
        animation-delay:4.4s;
      }

      &:nth-child(9) {
        width:80%;
        animation-delay:4.8s;
      }
    }
  }
  
  @media screen and (max-width: 1400px) {
    width:40%;
    padding:0;
    margin:0 10%;
  }

  @media screen and (max-width: 1000px) {
    width:70%;
    padding:0;
    margin:2rem 15%;
  }

  img {
    width:100%;
  }
}

.dark .how-it-illustration {
  .fake-image,
  .fake-description .header,
  .fake-description .line {
    background: linear-gradient(rgb(82, 28, 115), rgb(44, 13, 63)) padding-box,
                linear-gradient(to bottom, rgb(177, 87, 233), rgb(108, 27, 159)) border-box;
  }

  &::after {
    opacity: 0.25;
  }
}

@keyframes pulse {
  0% {
    transform: translate3d(0, 0, 0px);
  }
  50% {
    transform: translate3d(0, 0, 40px);
  }
  100% {
    transform: translate3d(0, 0, 0px);
  }
}

@keyframes circle {
  0% {
    transform: translate3d(0, 0, 0px);
  }
  25% {
    transform: translate3d(80px, 0, 0px);
  }
  50% {
    transform: translate3d(80px, 80px, 0px);
  }
  75% {
    transform: translate3d(0, 80px, 0px);
  }
  100% {
    transform: translate3d(0, 0, 0px);
  }
}

</style>